{% extends 'base.html.twig' %}

{% block title %}
	{{ datas.name }}
{% endblock %}

{% block body %}
	<div class="trick-page-top">

		{% if datas.figurePictures|length == 0 %}
			<img src="{{ asset('image/default/default.jpg') }}" class="card-img-top">

		{% elseif datas.figurePictures|length == 1 %}
			<img src="{{ asset('image/upload/' ~ datas.figurePictures[0].fileName) }}" class="card-img-top">


		{% elseif datas.figurePictures|length > 1 %}
			{% set mainExist = false %}
			{% for picture in datas.figurePictures %}
				{% if picture.main %}
					{% set mainExist = true %}
					<img src="{{ asset('image/upload/' ~ picture.fileName) }}" class="card-img-top">
				{% endif %}
			{% endfor %}
			{% if mainExist == false %}
				<img src="{{ asset('image/upload/' ~ datas.figurePictures[0].fileName) }}" class="card-img-top">
			{% endif %}
		{% endif %}

		<h1>{{ datas.name | capitalize}}</h1>
	</div>
	<div class="trick-page-mid">
		{% for video in datas.relatedVideos %}
			{{ video.link | raw}}

		{% endfor %}
		{% for picture in datas.figurePictures %}
			{% if picture.main is same as false %}

				<img src="{{ asset('image/upload/' ~ picture.fileName) }}" class="trick-small-image">
			{% endif %}

		{% endfor %}
	</div>
	<div class="trick-description">
		<h2>{{"figure.description"|trans}}</h2>
		<p>{{ datas.description }}</p>
	</div>
	<div class="trick-comments">
		{{ form(form) }}
			<h2>{{"figure.comments"|trans}}</h2>
			{% for comment in datas.comments %}
				<div class="figure-comment">
					<div class="figure-comment-details">
						<p>{{ comment.user.name }}</p>
						<p>{{ comment.date | date("m/d/Y \\Ã  G\\hi", "Europe/Paris") }}</p>
					</div>
					<p>{{ comment.content }}</p>
				</div>
			{% endfor %}
		</div>
	{% endblock %}
